:root{
  --bg: #ffffff;
  --text: #0b1220;
  --muted: #6b7280;
  --accent: #2563eb;
  --card: #f8fafc;
  --glass: rgba(255,255,255,0.6);
  --radius: 12px;
  --maxwidth: 920px;
  --sidebar-width: 300px;
}
[data-theme="dark"]{
  --bg:#0b1220; --text:#e6eef8; --muted:#9aa6b2; --accent:#4f8cff; --card:#071022; --glass: rgba(10,12,18,0.45);
}

*{box-sizing:border-box}
html,body{height:100%; margin:0; font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background:var(--bg); color:var(--text); -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale}
a{color:var(--accent); text-decoration:none}
a:hover{text-decoration:underline}

/* Topbar */
.topbar{
  display:flex; gap:12px; align-items:center; padding:12px 16px;
  background: linear-gradient(180deg, var(--card), rgba(0,0,0,0));
  backdrop-filter: blur(6px);
  border-bottom: 1px solid rgba(0,0,0,0.06);
  position: sticky; top:0; z-index: 40;
  box-shadow: 0 1px 0 rgba(0,0,0,0.03);
}
.brand{display:flex; gap:10px; align-items:center;}
.logo svg{width:36px;height:36px;color:var(--accent)}
.brand-text strong{display:block; font-weight:700}
.brand-text small{display:block; font-size:12px; color:var(--muted)}

/* Controls */
.controls{margin-left:auto; display:flex; gap:8px; align-items:center}
.controls input[type="text"]{padding:8px 10px; min-width:260px; border-radius:10px; border:1px solid rgba(0,0,0,0.06); background:transparent; color:var(--text)}
.primary{background:var(--accent); color:white; border:none; padding:8px 12px; border-radius:10px; cursor:pointer}
.filebtn{display:inline-flex; align-items:center; gap:8px; background:transparent; border:1px solid rgba(0,0,0,0.06); padding:8px 10px; border-radius:10px; cursor:pointer}
.filebtn input{display:none}
.file-label{font-size:14px}
.icon-btn{background:transparent; border:1px solid rgba(0,0,0,0.06); padding:8px 10px; border-radius:10px; cursor:pointer}
.icon-btn:active{transform:translateY(1px)}

/* Layout */
#main{display:flex; min-height:calc(100vh - 120px); gap:18px; padding:20px}
#sidebar{
  width:var(--sidebar-width);
  min-width:220px;
  border-right:1px solid rgba(0,0,0,0.05);
  padding:14px; background:var(--card);
  border-radius: var(--radius);
  height: calc(100vh - 140px);
  position: sticky; top:70px; overflow:auto;
  transition: transform .28s ease, opacity .28s ease;
}
#viewer{flex:1; padding:22px; overflow:auto; min-height:60vh}
.placeholder{padding:32px; color:var(--muted); background:transparent; border:1px dashed rgba(0,0,0,0.06); border-radius:10px}

/* Markdown body */
.markdown-body{max-width:var(--maxwidth); margin:0 auto; font-size:16px; line-height:1.65}
.markdown-body h1{font-size:28px; margin-top:0}
.markdown-body h2{font-size:22px}
.markdown-body h3{font-size:18px}
.markdown-body p{margin:0 0 1em}
.markdown-body ul, .markdown-body ol{margin:0 0 1em 1.25rem}
.markdown-body blockquote{border-left:4px solid rgba(0,0,0,0.06); padding:8px 12px; color:var(--muted); background:transparent; border-radius:6px}

/* Code & pre (improved + compatible with hljs) */
.markdown-body pre{
  padding:14px; border-radius:10px; overflow:auto; font-size:13px;
  background: linear-gradient(180deg, rgba(11,18,32,0.95), rgba(11,18,32,0.9));
  color:#dbeafe; border: 1px solid rgba(255,255,255,0.02);
  box-shadow: 0 6px 20px rgba(12,18,30,0.04);
}
.markdown-body code{background:rgba(14,62,255,0.06); padding:2px 6px; border-radius:6px; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", "Courier New", monospace}
.markdown-body table{width:100%; border-collapse:collapse; margin:14px 0}
.markdown-body th, .markdown-body td{border:1px solid rgba(0,0,0,0.06); padding:8px 10px; text-align:left}
.markdown-body img{max-width:100%; display:block; margin:12px 0; border-radius:8px}

/* Math placeholders style (visual only) */
.md-math-block{padding:8px 12px; margin:10px 0; border-radius:8px; background:transparent}
.md-math-inline{display:inline-block}

/* TOC & buttons */
#toc a{display:block; padding:6px 4px; color:var(--accent); text-decoration:none; font-size:14px}
#toc a:hover{text-decoration:underline}
.sidebar-actions{margin-top:12px; display:flex; gap:8px}

/* Footer */
.footer{padding:12px; text-align:center; color:var(--muted); border-top:1px solid rgba(0,0,0,0.04); margin-top:18px; background:transparent; border-radius:0}

/* Responsive: tablet & mobile */
@media (max-width:1000px){
  #main{padding:14px; gap:12px}
  #sidebar{position:fixed; right:0; top:70px; height:calc(100vh - 80px); transform:translateX(110%); width:80%; max-width:380px; border-radius:12px 0 0 12px; box-shadow: -20px 30px 60px rgba(2,8,23,0.12)}
  #sidebar.open{transform:translateX(0)}
  #viewer{padding:18px}
  .controls input[type="text"]{min-width:120px}
  .brand-text small{display:none}
}

/* Small phones */
@media (max-width:600px){
  .controls{flex-wrap:wrap; gap:6px}
  .controls input[type="text"]{min-width:80px; flex:1 1 100%}
  #main{flex-direction:column; padding:10px}
  #sidebar{position:fixed; left:auto; right:0; top:64px; width:88%}
}

/* Tiny helper tweaks */
button.primary, .filebtn, .icon-btn, .ghost{transition:transform .12s ease, box-shadow .12s ease}
button.primary:active{transform:translateY(1px)}
